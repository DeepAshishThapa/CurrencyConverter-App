const countrylist = {
    
    
    "ada": "Cardano",
    "aed": "Emirati Dirham",
    "afn": "Afghan Afghani",
    "agix": "SingularityNET",
    "akt": "Akash Network",
    "algo": "Algorand",
    
    "amd": "Armenian Dram",
    "amp": "Amp",
    "ang": "Dutch Guilder",
    "aoa": "Angolan Kwanza",
    
   
    "ar": "Arweave",
    
   
    "atom": "Cosmos",
    
    "aud": "Australian Dollar",
    
    "awg": "Aruban or Dutch Guilder",
    "axs": "Axie Infinity",
    "azm": "Azerbaijani Manat",
    
    "bake": "BakeryToken",
   
    
    "bbd": "Barbadian or Bajan Dollar",
   
    "bdt": "Bangladeshi Taka",
    "bef": "Belgian Franc",
    "bgn": "Bulgarian Lev",
    "bhd": "Bahraini Dinar",
    "bif": "Burundian Franc",
    "bmd": "Bermudian Dollar",
    "bnb": "Binance Coin",
    "bnd": "Bruneian Dollar",
    "bob": "Bolivian Bolíviano",
    "brl": "Brazilian Real",
    "bsd": "Bahamian Dollar",
    
    "bsw": "Biswap",
    "btc": "Bitcoin",
    
    
    "btn": "Bhutanese Ngultrum",
    
    
    "bwp": "Botswana Pula",
    "byn": "Belarusian Ruble",
    "byr": "Belarusian Ruble",
    "bzd": "Belizean Dollar",
    "cad": "Canadian Dollar",
    
    "cdf": "Congolese Franc",
    
    "cfx": "Conflux",
    "chf": "Swiss Franc",
    
    "clp": "Chilean Peso",
    "cnh": "Chinese Yuan Renminbi Offshore",
    
    "comp": "Compound",
    
    "crc": "Costa Rican Colon",
    
    "crv": "Curve DAO Token",
    
    "cuc": "Cuban Convertible Peso",
    
    "cve": "Cape Verdean Escudo",
   
    "cyp": "Cypriot Pound",
    "czk": "Czech Koruna",
    
    
    
    "dem": "German Deutsche Mark",
    
    "djf": "Djiboutian Franc",
    "dkk": "Danish Krone",
    "doge": "Dogecoin",
    "dop": "Dominican Peso",
    
    
    "dzd": "Algerian Dinar",
    "eek": "Estonian Kroon",
    "egld": "Elrond",
    
   
    
    "ern": "Eritrean Nakfa",
    "esp": "Spanish Peseta",
    "etb": "Ethiopian Birr",
    "etc": "Ethereum Classic",
    
    "eur": "Euro",
   
    "fil": "Filecoin",
    
    "fjd": "Fijian Dollar",
    "fkp": "Falkland Island Pound",
    
    
    "frax": "Frax",
    
    
    
    "gala": "Gala",
    "gbp": "British Pound",
    "gel": "Georgian Lari",
    "ggp": "Guernsey Pound",
    "ghc": "Ghanaian Cedi",
    
    "gip": "Gibraltar Pound",
    "gmd": "Gambian Dalasi",
    
    "gnf": "Guinean Franc",
    
    "grd": "Greek Drachma",
    
    "gt": "GateToken",
    
    "gusd": "Gemini US Dollar",
    "gyd": "Guyanese Dollar",
    
    "hkd": "Hong Kong Dollar",
    "hnl": "Honduran Lempira",
    
    
    "hrk": "Croatian Kuna",
    "ht": "Huobi Token",
    
    "huf": "Hungarian Forint",
   
    "idr": "Indonesian Rupiah",
    "iep": "Irish Pound",
    "ils": "Israeli Shekel",
    "imp": "Isle of Man Pound",
    
    
    "inr": "Indian Rupee",
    "iqd": "Iraqi Dinar",
    "irr": "Iranian Rial",
    "isk": "Icelandic Krona",
    "itl": "Italian Lira",
    "jep": "Jersey Pound",
    "jmd": "Jamaican Dollar",
    "jod": "Jordanian Dinar",
    "jpy": "Japanese Yen",

    
   
    
    "kes": "Kenyan Shilling",
    "kgs": "Kyrgyzstani Som",
    "khr": "Cambodian Riel",
    
    "kmf": "Comorian Franc",
    "knc": "Kyber Network Crystals",
    "kpw": "North Korean Won",
    "krw": "South Korean Won",
   
    "kwd": "Kuwaiti Dinar",
    "kyd": "Caymanian Dollar",
    "kzt": "Kazakhstani Tenge",
    "lak": "Lao Kip",
    "lbp": "Lebanese Pound",
   
    "lkr": "Sri Lankan Rupee",
    
    "lrd": "Liberian Dollar",
    "lsl": "Basotho Loti",
    "ltc": "Litecoin",
   
    "luf": "Luxembourg Franc",
   
    
    "lvl": "Latvian Lat",
    "lyd": "Libyan Dinar",
    "mad": "Moroccan Dirham",
   
   
    
    "mdl": "Moldovan Leu",
    "mga": "Malagasy Ariary",
    "mgf": "Malagasy Franc",
    
    "mkd": "Macedonian Denar",
   
    "mmk": "Burmese Kyat",
    "mnt": "Mongolian Tughrik",
    "mop": "Macau Pataca",
    "mro": "Mauritanian Ouguiya",
    
    "mtl": "Maltese Lira",
    "mur": "Mauritian Rupee",
    "mvr": "Maldivian Rufiyaa",
    "mwk": "Malawian Kwacha",
    "mxn": "Mexican Peso",
    
    "myr": "Malaysian Ringgit",
    "mzm": "Mozambican Metical",
    
    "nad": "Namibian Dollar",
    "near": "NEAR Protocol",
    
    "nexo": "NEXO",
    "nft": "NFT",
    "ngn": "Nigerian Naira",
    "nio": "Nicaraguan Cordoba",
    "nlg": "Dutch Guilder",
    "nok": "Norwegian Krone",
    "npr": "Nepalese Rupee",
    "nzd": "New Zealand Dollar",
    
    "omr": "Omani Rial",
    
    
    
    "pab": "Panamanian Balboa",
   
    "pen": "Peruvian Sol",
    
    "pgk": "Papua New Guinean Kina",
    "php": "Philippine Peso",
    "pkr": "Pakistani Rupee",
    "pln": "Polish Zloty",
    "pte": "Portuguese Escudo",
    "pyg": "Paraguayan Guarani",
    "qar": "Qatari Riyal",
    
   
    "rol": "Romanian Leu",
    
   
    "rsd": "Serbian Dinar",
    "rub": "Russian Ruble",
    
    
    "rwf": "Rwandan Franc",
    "sand": "The Sandbox",
    
    "sbd": "Solomon Islander Dollar",
    "scr": "Seychellois Rupee",
    "sdd": "Sudanese Dinar",
    
    "sek": "Swedish Krona",
    "sgd": "Singapore Dollar",
    "shib": "Shiba Inu",
    
    "sit": "Slovenian Tolar",
    "skk": "Slovak Koruna",
    "sle": "Sierra Leonean Leone",
    
    "snx": "Synthetix Network",
    "sol": "Solana",
    
    
    "srd": "Surinamese Dollar",
    
    
    "stn": "Sao Tomean Dobra",
    
   
    "svc": "Salvadoran Colon",
    "syp": "Syrian Pound",
    "szl": "Swazi Lilangeni",
    "thb": "Thai Baht",
    
    "tjs": "Tajikistani Somoni",
    "tmm": "Turkmenistani Manat",
    "tmt": "Turkmenistani Manat",
    "tnd": "Tunisian Dinar",
    "ton": "Tokamak Network",
    
   
    "trx": "TRON",
    
    "ttd": "Trinidadian Dollar",

    "tvd": "Tuvaluan Dollar",
    "twd": "Taiwan New Dollar",
    
    "tzs": "Tanzanian Shilling",
    "uah": "Ukrainian Hryvnia",
    "ugx": "Ugandan Shilling",
   
    "usd": "US Dollar",
    
    
   
    
    "uyu": "Uruguayan Peso",
    "uzs": "Uzbekistani Som",
    "val": "Vatican City Lira",
    "veb": "Venezuelan Bolívar",
   
   
   
    "vet": "Vechain",
    "vnd": "Vietnamese Dong",
    "vuv": "Ni-Vanuatu Vatu",
    
   
    "wst": "Samoan Tala",
   
  
   
    
    
    "yer": "Yemeni Rial",
    "zar": "South African Rand",
    
    
    "zmk": "Zambian Kwacha",
    "zmw": "Zambian Kwacha",
    "zwd": "Zimbabwean Dollar",
   
    "zwl": "Zimbabwean Dollar"
}

selectAll = document.querySelectorAll('.select')
for (let countrycode in countrylist) {

    selectAll.forEach(select => {
        option = document.createElement('option')
        countrycode = countrycode.toUpperCase()
        option.innerHTML = countrycode;
        option.value = countrycode
        select.appendChild(option)

    });




}
select1 = document.querySelector('#select1')
select1.addEventListener('change', () => {

    let countrycode = select1.value
    let code = countrycode.substring(0, 2);
    let img1 = document.getElementsByTagName('img')[0];
    img1.src = `https:flagsapi.com/${code}/flat/64.png`
    console.log(select1.value)

})

select2 = document.querySelector('#select2')
select2.addEventListener('change', () => {
    let countrycode = select2.value
    let code = countrycode.substring(0, 2);
    let img2 = document.getElementsByTagName('img')[1];
    img2.src = `https:flagsapi.com/${code}/flat/64.png`
})

button = document.querySelector('button')
input = document.querySelector('input')
button.addEventListener('click', () => {
    let fromcurrencyC = select1.value
    let tocurrencyC = select2.value
    let fromcurrency = select1.value.toLowerCase();
    let tocurrency = select2.value.toLowerCase();

    amount = input.value
    if (isNaN(amount) || amount === "") { 
        alert("Please enter a valid number.");
        return;
    }
    amount=parseFloat(amount)

    async function fetchapi() {
        url = `https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/${fromcurrency}.json`
        
        response = await fetch(url);
        if (!response.ok){
            throw new Error("invalid input")
        }
        
        data = await response.json();
        //  console.log(data)

        //  console.log(data[fromcurrency][tocurrency])

        rate = data[fromcurrency][tocurrency];
        convertedamount = Math.round(rate * amount)
        text = document.querySelector('#text')
        text.innerHTML = `${amount} ${fromcurrencyC} = ${convertedamount} ${tocurrencyC}`;
        
       
    }

    fetchapi();


})
input.addEventListener('keydown', async (event) => {
    if (event.key == 'Enter') {
        let fromcurrencyC = select1.value
        let tocurrencyC = select2.value
        let fromcurrency = select1.value.toLowerCase();
        let tocurrency = select2.value.toLowerCase();

        amount = input.value;
        if (isNaN(amount) || amount === "") { 
            alert("Please enter a valid number.");
            return;
        }
        amount=parseFloat(amount)

        async function fetchapi() {
            url = `https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/${fromcurrency}.json`
            try {
                response = await fetch(url);
                data = await response.json();
                //  console.log(data)

                //  console.log(data[fromcurrency][tocurrency])
                rate = data[fromcurrency][tocurrency];
                convertedamount = Math.round(rate * amount)
                text = document.querySelector('#text')
                text.innerHTML = `${amount} ${fromcurrencyC} = ${convertedamount} ${tocurrencyC}`;
            }
            catch (error) {
                alert("invalid entry")
            }
        }

        fetchapi();
    }


})



